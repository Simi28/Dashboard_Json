{
  "name": "Ingestion Engine",
  "description": null,
  "permissions": "PUBLIC_READ_WRITE",
  "pages": [
    {
      "name": "Ingestion Engine",
      "description": null,
      "widgets": [
        {
          "title": "Total Ingestion(GBs)",
          "layout": { "column": 1, "row": 1, "width": 6, "height": 3 },
          "linkedEntityGuids": [],
          "visualization": { "id": "viz.billboard" },
          "rawConfiguration": {
            "facet": { "showOtherSeries": false },
            "nrqlQueries": [
              {
                "accountIds": [{{ACCOUNT_IDS}}],
                "query": "FROM NrConsumption SELECT sum(GigabytesIngested) AS 'Total Ingestion(GBs)' WHERE string(accountId()) IN ({{accountID}}) SINCE 6 months ago"
              }
            ],
            "platformOptions": { "ignoreTimeRange": false }
          }
        },
        {
          "title": "Total Ingestion in GBs (month-wise)",
          "layout": { "column": 7, "row": 1, "width": 6, "height": 3 },
          "linkedEntityGuids": [],
          "visualization": { "id": "viz.billboard" },
          "rawConfiguration": {
            "facet": { "showOtherSeries": false },
            "nrqlQueries": [
              {
                "accountIds": [{{ACCOUNT_IDS}}],
                "query": "FROM NrConsumption SELECT sum(GigabytesIngested) SINCE 6 months ago FACET monthOf(timestamp) LIMIT MAX UNTIL today WHERE string(accountId()) IN ({{accountID}})"
              }
            ],
            "platformOptions": { "ignoreTimeRange": false }
          }
        },
        {
          "title": "Total Ingestion in GBs (Segregation)",
          "layout": { "column": 1, "row": 4, "width": 6, "height": 4 },
          "linkedEntityGuids": ["Mzg2NjA3N3xWSVp8REFTSEJPQVJEfDQwMjcxNTU0"],
          "visualization": { "id": "viz.pie" },
          "rawConfiguration": {
            "facet": { "showOtherSeries": true },
            "legend": { "enabled": true },
            "nrqlQueries": [
              {
                "accountIds": [{{ACCOUNT_IDS}}],
                "query": "FROM NrConsumption SELECT sum(GigabytesIngested) AS 'Total Ingestion(GBs)' FACET usageMetric WHERE string(accountId()) IN ({{accountID}}) SINCE 6 months ago"
              }
            ],
            "platformOptions": { "ignoreTimeRange": false }
          }
        },
        {
          "title": "Total Ingestion Details (month-wise)",
          "layout": { "column": 7, "row": 4, "width": 6, "height": 4 },
          "linkedEntityGuids": [],
          "visualization": { "id": "viz.table" },
          "rawConfiguration": {
            "facet": { "showOtherSeries": false },
            "nrqlQueries": [
              {
                "accountIds": [{{ACCOUNT_IDS}}],
                "query": "FROM NrConsumption SELECT sum(GigabytesIngested) AS 'Total Ingestion(GBs)' WHERE string(accountId()) IN ({{accountID}}) SINCE 6 months ago FACET monthOf(timestamp) LIMIT MAX"
              }
            ],
            "platformOptions": { "ignoreTimeRange": false }
          }
        },
        {
          "title": "Total Ingestion Trend (month-wise)",
          "layout": { "column": 1, "row": 8, "width": 12, "height": 4 },
          "linkedEntityGuids": [],
          "visualization": { "id": "viz.line" },
          "rawConfiguration": {
            "facet": { "showOtherSeries": false },
            "legend": { "enabled": true },
            "markers": {
              "displayedTypes": {
                "criticalViolations": false,
                "deployments": true,
                "relatedDeployments": true,
                "warningViolations": false
              }
            },
            "nrqlQueries": [
              {
                "accountIds": [{{ACCOUNT_IDS}}],
                "query": "FROM NrConsumption SELECT sum(GigabytesIngested) AS 'Total Ingestion (GBs)' WHERE monthOf(timestamp) != (FROM NrConsumption SELECT latest(monthOf(timestamp))) SINCE 6 months ago FACET monthOf(timestamp) TIMESERIES 3 days LIMIT MAX UNTIL today WHERE string(accountId()) IN ({{accountID}})"
              }
            ],
            "platformOptions": { "ignoreTimeRange": false },
            "thresholds": { "isLabelVisible": true },
            "yAxisLeft": { "zero": false },
            "yAxisRight": { "zero": true }
          }
        }
      ]
    }
  ],
  "variables": [
    {
      "name": "accountID",
      "items": null,
      "defaultValues": [
        {
          "value": { "string": "*" }
        }
      ],
      "nrqlQuery": {
        "accountIds": [{{ACCOUNT_IDS}}],
        "query": "FROM NrComputeUsage SELECT uniques(accountID())"
      },
      "options": {
        "ignoreTimeRange": true,
        "excluded": false,
        "showApplyAction": false
      },
      "title": "AccountID",
      "type": "NRQL",
      "isMultiSelection": true,
      "replacementStrategy": "STRING"
    }
  ]
}
